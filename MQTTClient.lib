http://mbed.org/users/icraggs/code/MQTTClient/#7734401cc1b4
